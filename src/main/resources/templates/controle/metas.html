<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metas Financeiras - EquilÃ­brio Finance</title>
    <meta name="description" content="Defina e acompanhe suas metas financeiras: viagens, casa prÃ³pria, carro, reserva de emergÃªncia e muito mais.">
    
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/controle.css">
    <link rel="stylesheet" href="/css/premium.css">
</head>
<body>
    <div th:replace="~{fragments/header :: header}"></div>
    
    <!-- Banner de Upgrade (apenas para usuÃ¡rios nÃ£o premium) -->
    <div th:replace="~{fragments/ads :: upgrade-banner}"></div>

    <main class="main-content">
        <section class="controle-header">
            <div class="container">
                <h1>ğŸ¯ Metas Financeiras</h1>
                <p class="subtitle">Defina objetivos, acompanhe seu progresso e realize seus sonhos financeiros</p>
            </div>
        </section>

        <section class="controle-content">
            <div class="container">
                <!-- Resumo de Metas -->
                <div class="resumo-grid">
                    <div class="resumo-card metas-ativas">
                        <div class="resumo-icon">ğŸ¯</div>
                        <div class="resumo-info">
                            <span class="resumo-label">Metas Ativas</span>
                            <span class="resumo-valor" id="totalMetas">0</span>
                        </div>
                    </div>
                    
                    <div class="resumo-card valor-total">
                        <div class="resumo-icon">ğŸ’°</div>
                        <div class="resumo-info">
                            <span class="resumo-label">Valor Total das Metas</span>
                            <span class="resumo-valor" id="valorTotalMetas">R$ 0,00</span>
                        </div>
                    </div>
                    
                    <div class="resumo-card progresso-total">
                        <div class="resumo-icon">ğŸ“ˆ</div>
                        <div class="resumo-info">
                            <span class="resumo-label">JÃ¡ Conquistado</span>
                            <span class="resumo-valor" id="valorConquistado">R$ 0,00</span>
                        </div>
                    </div>
                    
                    <div class="resumo-card metas-concluidas">
                        <div class="resumo-icon">âœ…</div>
                        <div class="resumo-info">
                            <span class="resumo-label">Metas ConcluÃ­das</span>
                            <span class="resumo-valor" id="metasConcluidas">0</span>
                        </div>
                    </div>
                </div>

                <!-- FormulÃ¡rio e Lista de Metas -->
                <div class="controle-grid">
                    <!-- FormulÃ¡rio -->
                    <div class="form-card">
                        <h2>â• Nova Meta</h2>
                        
                        <form id="formMeta">
                            <div class="form-group">
                                <label for="nomeMeta">
                                    <strong>Nome da Meta</strong>
                                </label>
                                <input 
                                    type="text" 
                                    id="nomeMeta" 
                                    placeholder="Ex: Viagem para Europa, Carro Novo"
                                    required
                                    maxlength="80"
                                >
                            </div>

                            <div class="form-group">
                                <label for="valorAlvo">
                                    <strong>Valor Alvo</strong>
                                </label>
                                <input 
                                    type="text" 
                                    id="valorAlvo" 
                                    placeholder="R$ 0,00"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="valorAtual">
                                    <strong>Valor JÃ¡ Guardado</strong>
                                </label>
                                <input 
                                    type="text" 
                                    id="valorAtual" 
                                    placeholder="R$ 0,00"
                                    value="R$ 0,00"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="prazo">
                                    <strong>Prazo Desejado</strong>
                                </label>
                                <input 
                                    type="date" 
                                    id="prazo" 
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="categoria">
                                    <strong>Categoria</strong>
                                </label>
                                <select id="categoria" required>
                                    <option value="viagem">âœˆï¸ Viagem</option>
                                    <option value="casa">ğŸ  Casa PrÃ³pria</option>
                                    <option value="veiculo">ğŸš— VeÃ­culo</option>
                                    <option value="reserva">ğŸ¦ Reserva de EmergÃªncia</option>
                                    <option value="estudos">ğŸ“š Estudos</option>
                                    <option value="aposentadoria">ğŸ‘´ Aposentadoria</option>
                                    <option value="investimento">ğŸ“ˆ Investimento</option>
                                    <option value="outras">ğŸ¯ Outras</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="descricao">
                                    <strong>DescriÃ§Ã£o (opcional)</strong>
                                </label>
                                <textarea 
                                    id="descricao" 
                                    rows="3"
                                    placeholder="Descreva sua meta..."
                                    maxlength="200"
                                ></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary btn-block">
                                Criar Meta
                            </button>
                        </form>
                    </div>

                    <!-- Lista de Metas -->
                    <div class="visualizacao-card">
                        <div class="filtros-section">
                            <h3>ğŸ“Š Minhas Metas</h3>
                            <div class="filtros-grid">
                                <select id="filtroStatus" class="filtro-select">
                                    <option value="todas">Todas as Metas</option>
                                    <option value="ativas">Ativas</option>
                                    <option value="concluidas">ConcluÃ­das</option>
                                </select>
                                <select id="filtroCategoria" class="filtro-select">
                                    <option value="todas">Todas as Categorias</option>
                                    <option value="viagem">âœˆï¸ Viagem</option>
                                    <option value="casa">ğŸ  Casa PrÃ³pria</option>
                                    <option value="veiculo">ğŸš— VeÃ­culo</option>
                                    <option value="reserva">ğŸ¦ Reserva de EmergÃªncia</option>
                                    <option value="estudos">ğŸ“š Estudos</option>
                                    <option value="aposentadoria">ğŸ‘´ Aposentadoria</option>
                                    <option value="investimento">ğŸ“ˆ Investimento</option>
                                    <option value="outras">ğŸ¯ Outras</option>
                                </select>
                            </div>
                        </div>

                        <div id="listaMetas" class="lista-metas">
                            <div class="lista-vazia">
                                <p>Nenhuma meta cadastrada ainda</p>
                                <p class="texto-secundario">Crie sua primeira meta financeira usando o formulÃ¡rio ao lado</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dicas -->
                <div class="dicas-section">
                    <h2>ğŸ’¡ Como Conquistar suas Metas Financeiras</h2>
                    <div class="dicas-grid">
                        <div class="dica-card">
                            <div class="dica-icon">ğŸ¯</div>
                            <h3>Seja EspecÃ­fico</h3>
                            <p>Defina metas claras com valores e prazos. "Guardar R$ 30.000 para entrada de imÃ³vel em 2 anos" Ã© melhor que "juntar dinheiro".</p>
                        </div>
                        <div class="dica-card">
                            <div class="dica-icon">ğŸ“Š</div>
                            <h3>Acompanhe seu Progresso</h3>
                            <p>Atualize regularmente quanto jÃ¡ guardou. Ver o progresso visual motiva a continuar.</p>
                        </div>
                        <div class="dica-card">
                            <div class="dica-icon">ğŸ’°</div>
                            <h3>Automatize</h3>
                            <p>Configure transferÃªncias automÃ¡ticas para sua meta logo apÃ³s receber o salÃ¡rio.</p>
                        </div>
                        <div class="dica-card">
                            <div class="dica-icon">ğŸ†</div>
                            <h3>Comemore Conquistas</h3>
                            <p>Ao atingir 25%, 50%, 75% da meta, celebre! Reconhecer seu esforÃ§o mantÃ©m a motivaÃ§Ã£o.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div th:replace="~{fragments/footer :: footer}"></div>

    <script src="/js/api-service.js"></script>
    <script src="/js/controle-metas-api.js"></script>
</body>
</html>
